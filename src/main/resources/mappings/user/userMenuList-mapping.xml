<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="UserMenuListDAO">
	
	<select id="storeInfo" resultType="StoreVO" parameterType="StoreVO">
		SELECT * FROM STORE_INFO WHERE SI_CODE = #{si_code}
	</select>
	
	<select id="menuTitle" resultType="MenuListVO" parameterType="MenuListVO">
		SELECT * FROM MENU_GROUP WHERE SI_CODE = #{si_code} ORDER BY MG_CODE
	</select>
	
	<select id="menuList" resultType="MenuListVO" parameterType="MenuListVO">
		SELECT *
			FROM MENU M LEFT JOIN OPTIONGROUP_BASIC OB ON M.M_SEQ = OB.M_SEQ LEFT JOIN OPTION_BASIC OB2 ON OB.OGB_SEQ = OB2.OGB_SEQ 
			WHERE M.SI_CODE = #{si_code} AND OB2.OPB_CODE LIKE '%1' ORDER BY M.M_CODE
	</select>
	
	<select id="optionList" resultType="MenuListVO" parameterType="MenuListVO">
		SELECT MG_CODE, MG_NAME, M_CODE, M_NAME, OG_CODE, OG_NAME, OP_CODE, OP_NAME, OP_PRICE 
			FROM MENUANDOPTION M WHERE SI_CODE = #{si_code}
			ORDER BY M_CODE, OP_CODE
		
	</select>
	
	<select id="basicOptionList" resultType="MenuListVO" parameterType="MenuListVO">
		SELECT OB.SI_CODE, OB.M_CODE, OB2.OPB_CODE, OB2.OPB_NAME, OB2.OPB_PRICE 
			FROM OPTIONGROUP_BASIC OB JOIN OPTION_BASIC OB2 ON OB.OGB_SEQ = OB2.OGB_SEQ 
			WHERE OB.SI_CODE = #{si_code}
			ORDER BY OB2.OPB_CODE
	</select>
	
</mapper>
 