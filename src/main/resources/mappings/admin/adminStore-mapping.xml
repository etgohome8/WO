<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="AStoreDAO">
	<resultMap type="StoreVO" id="storeVO">
		<id column="SI_CODE" property="si_code" jdbcType="VARCHAR"/>
		<result column="SI_SEQ" property="si_seq" jdbcType="INTEGER" />
		<result column="SI_NAME" property="si_name" jdbcType="VARCHAR" />
		<result column="SI_REG_DATE" property="si_reg_date" jdbcType="TIMESTAMP"/>
		<result column="SI_LOC" property="si_loc" jdbcType="VARCHAR"/>
		<result column="SI_ZIPCODE" property="si_zipcode" jdbcType="VARCHAR" />
		<result column="SI_ADDRESS" property="si_address" jdbcType="VARCHAR" />
		<result column="SI_ADDR_ROAD" property="si_addr_road" jdbcType="VARCHAR" />
		<result column="SI_ADDR_DETAIL" property="si_addr_detail" jdbcType="VARCHAR" />
		<result column="SI_TEL" property="si_tel" jdbcType="VARCHAR" />
		<result column="SI_PARKING_ABLE" property="si_parking_able" jdbcType="BOOLEAN" />
		<result column="SI_DUE_TIME" property="si_due_time" jdbcType="VARCHAR" />
		<result column="SI_HOLIDAY_FIX" property="si_holiday_fix" jdbcType="VARCHAR" />
		<result column="SI_HOLIDAY_IMSI" property="si_holiday_imsi" jdbcType="VARCHAR" />
		<result column="SI_OPEN" property="si_open" jdbcType="VARCHAR" />
		<result column="SI_CLOSE" property="si_close" jdbcType="VARCHAR" />
		<result column="SI_REFERINFO" property="si_referinfo" jdbcType="VARCHAR" />
		<result column="SI_MAP_IMAGE" property="si_map_image" jdbcType="VARCHAR" />
		<result column="SI_DIRECTIONS" property="si_directions" jdbcType="VARCHAR" />
		<result column="SI_IMAGE" property="si_image" jdbcType="VARCHAR" />
		<result column="SI_STATUS" property="si_status" jdbcType="VARCHAR" />
		<result column="SI_USESTORE" property="si_usestore" jdbcType="VARCHAR" />
		<result column="SA_EMAIL" property="sa_email" jdbcType="VARCHAR" />
		<result column="SA_PASSWORD" property="sa_password" jdbcType="VARCHAR" />
<!-- 		<collection property="StoreVO" resultMap="StoreVO"></collection> -->
	</resultMap>
	<resultMap type="FranchiseVO" id="franchiseVO">
		<id column="F_CODE" property="f_code" jdbcType="VARCHAR"/>
		<result column="F_SEQ" property="f_seq" jdbcType="INTEGER" />
		<result column="F_NAME" property="f_name" jdbcType="VARCHAR" />
		<result column="F_TEL" property="f_tel" jdbcType="VARCHAR" />
		<result column="F_EMAIL" property="f_email" jdbcType="VARCHAR" />
		<result column="F_TITLE" property="f_title" jdbcType="VARCHAR" />
		<result column="F_REGDATE" property="f_regdate" jdbcType="TIMESTAMP"/>
		<result column="F_STATUS" property="f_status" jdbcType="BOOLEAN" />
	</resultMap>
	
	<select id="storeInquiryList" resultType="FranchiseVO" resultMap="franchiseVO">
		SELECT * FROM 
		FRANCHISE
		ORDER BY F_SEQ DESC
	</select>
	<insert id="insertStoreInquiry">
		INSERT INTO FRANCHISE (F_CODE, F_NAME, F_TEL, F_EMAIL, F_TITLE)
		VALUES (#{f_code}, #{f_name}, #{f_tel}, #{f_email}, #{f_title})
	</insert>
	
	<select id="storeList" resultType="StoreVO" resultMap="storeVO">
		SELECT * FROM 
		STORE_INFO a 
		INNER JOIN
		STORE_ACCOUNT b 
		ON (a.SI_CODE = b.SI_CODE)
		ORDER BY SI_SEQ DESC
	</select>
	
	<insert id="insertStoreInfo" parameterType="StoreVO">
		INSERT INTO STORE_INFO (SI_NAME, SI_CODE, SI_ZIPCODE, SI_ADDRESS, SI_ADDR_ROAD, SI_ADDR_DETAIL, SI_TEL,
		SI_OPEN, SI_CLOSE, SI_PARKING_ABLE, SI_USESTORE, SI_REFERINFO)
		VALUES(#{si_name}, #{si_code}, #{si_zipcode}, #{si_address}, #{si_address} , #{si_addr_detail}, #{si_tel},
		#{si_open}, #{si_close}, #{si_parking_able}, #{si_usestore}, #{si_referinfo})
	</insert>
	<insert id="insertStoreAccount" parameterType="StoreVO">
		INSERT INTO STORE_ACCOUNT (SA_ACC_NO, SA_PASSWORD, SI_CODE, SA_EMAIL)
		VALUES(#{si_code}, #{sa_password}, #{si_code}, #{sa_email})
	</insert>
</mapper>
